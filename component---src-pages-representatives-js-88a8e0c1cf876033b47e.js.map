{"version":3,"sources":["webpack:///./src/pages/representatives.js","webpack:///./src/components/peopleCardMini.js"],"names":["cssH1","fontSize","cssSection","paddingTop","paddingBottom","h2","textAlign","cssEngTitle","margin","cssPageP","cssBarChart","RepresentativesPage","props","data","house","loadCategoryStats","mp_type","gender","age","education","occupation_group","asset","keyMembers","name","label","map","keyPos","id","nameParts","split","slice","slug","peopleSlug","join","lastname","position","fields","votelogs","joinPeopleVotelog","allPeopleYaml","allPeopleVoteYaml","allVotelogYaml","filter","vote","total_voter","pageStyles","background","title","className","css","party_ordinal","style","dangerouslySetInnerHTML","__html","formatOrdinalNumber","description","x","key","marginTop","marginBottom","fontFamily","fontWeight","totalCount","length","node","view","width","description_th","passed","approve","disprove","abstained","absent","vote_date","PeopleCardMini","peopleInfo","to","MPInfo","backgroundImage","politicianPicture"],"mappings":"4RAoBO,IAkHDA,EAAQ,CACZC,SAAU,QAGNC,EAAa,CACjBC,WAAY,OACZC,cAAe,OACfC,GAAI,CACFJ,SAAU,SACVK,UAAW,WAITC,EAAc,CAClBN,SAAU,SACVK,UAAW,OACXE,OAAQ,qBAGJC,EAAW,GAEXC,EAAc,CAClBF,OAAQ,U,6OAuLKG,UApLa,SAAAC,GAAU,IAAD,EACRA,EAAMC,KAAzBC,EAD2B,EAC3BA,MAAUD,EADiB,2BAU/BE,YAAkBF,GANpBG,EAJiC,EAIjCA,QACAC,EALiC,EAKjCA,OACAC,EANiC,EAMjCA,IACAC,EAPiC,EAOjCA,UACAC,EARiC,EAQjCA,iBACAC,EATiC,EASjCA,MAGIC,EAAa,IACjB,CACE,CACEC,KAAM,UACNC,MAAO,aAET,CACED,KAAM,uBACNC,MAAO,wBAET,CACED,KAAM,wBACNC,MAAO,wBAET,CACED,KAAM,oBACNC,MAAO,kBAETC,KAAI,SAACC,EAAQC,GACb,IAAKb,EAAMY,EAAOH,MAAO,OAAO,KAChC,IAAMK,EAAYd,EAAMY,EAAOH,MAAMM,MAAM,KAAKC,MAAM,GAChDC,EAAOC,YAAWJ,EAAUK,KAAK,MAIvC,MAAO,CAAEN,KAAIJ,KAHAK,EAAU,GAGJM,SAFFN,EAAUE,MAAM,GAAGG,KAAK,KAEZE,SADZT,EAAOF,MACeY,OAAQ,CAAEL,aAI/CM,EAAWC,YACfzB,EAAK0B,cACL1B,EAAK2B,kBACL3B,EAAK4B,gBACLC,QAAO,SAAAC,GAAI,OAAIA,EAAKC,YAAc,KAEpC,OACE,YAAC,IAAD,CAAQC,WAAY,CAAEC,WAAY,YAChC,YAAC,IAAD,CAAKC,MAAM,4BACX,uBAASC,UAAU,WACjB,mBAAKA,UAAU,QACb,mBAAKA,UAAU,iBACb,kBAAIC,IAAG,6BAAOjD,EAAP,CAAcQ,OAAQ,eAAtB,KACJM,EAAMS,KADT,WACuBT,EAAMoC,eAE7B,kBAAIC,MAAK,iBAAO5C,IACd,oBACE6C,wBAAyB,CACvBC,OAAQC,YAAoBxC,EAAMoC,kBAEnC,IALL,2BAQA,kBAAIC,MAAK,iBAAO5C,IAAhB,SACA,iBAAG0C,IAAG,6BAAOxC,GAAP,KAAoBK,EAAMyC,aAChC,kBAAIN,IAAG,6BAAO1C,GAAP,KAAP,iBACA,YAAC,IAAoBO,GACrB,kBAAImC,IAAG,6BAAO1C,GAAP,KAAP,aACA,YAAC,IAAiBO,GAClB,kBAAIqC,MAAK,iBAAO5C,IAAhB,eACCe,EAAWG,KAAI,SAAA+B,GACd,OACE,mBAAKR,UAAU,aAAaS,IAAKD,EAAE7B,IACjC,YAAC,IAAD,aAAgB8B,IAAKD,EAAE7B,IAAQ6B,SAKvC,mBAAKR,UAAU,QACb,kBACEG,MAAK,iBACA5C,EADA,CAEHmD,UAAW,UACXC,aAAc,UAJlB,WASA,kBACER,MAAK,iBACA5C,EADA,CAEHqD,WAAY,iBACZC,WAAY,YAJhB,6BAO6BhD,EAAK0B,cAAcuB,WAPhD,OASA,mBAAKb,IAAG,GACN,mBAAKE,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMG,KAEzB,mBAAKmC,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMI,KAEzB,mBAAKkC,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMK,KAEzB,mBAAKiC,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMM,KAEzB,mBAAKgC,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMO,KAEzB,mBAAK+B,MAAK,iBAAOzC,IACf,YAAC,IAAD,CAAiBG,KAAMQ,SAOhCgB,EAAS0B,OAAS,EACjB,uBAASd,IAAG,6BAAO/C,EAAP,CAAmB4C,WAAY,oBAA/B,KACV,mBAAKE,UAAU,aACb,kBAAIC,IAAG,6BAAOjD,GAAP,KAAP,mCACA,mBACEiD,IAAG,GAQFZ,EAASZ,KAAI,SAAAuC,GAAI,OAChB,YAAC,IAAD,CACEP,IAAKO,EAAKrC,GACVsC,KAAM,UACNhB,IAAG,YAAE,CACHiB,MAAM,4CACN1D,OAAQ,oBAFP,IAIHuC,MAAOiB,EAAKjB,MACZoB,eAAgBH,EAAKG,eACrBC,OAAQJ,EAAKI,OACbC,QAASL,EAAKK,QACdC,SAAUN,EAAKM,SACfC,UAAWP,EAAKO,UAChBC,OAAQR,EAAKQ,OACb5B,YAAaoB,EAAKpB,YAClB6B,UAAWT,EAAKS,UAChB1C,KAAMiC,EAAK5B,OAAOL,aAM1B,KAEJ,uBAASkB,IAAG,6BAAO/C,EAAP,CAAmB4C,WAAY,YAA/B,KACV,mBAAKE,UAAU,aACb,uBACE,kBACEC,IAAG,GADL,wBASA,YAAC,IAAD,Y,ihBC7QGyB,IA1CQ,SAAA9D,GACrB,IAAI+D,EAhBS,SAAA/D,GAAK,OAClB,mBACEqC,IAAG,GASH,YAAC,OAAD,CAAM2B,GAAIhE,EAAMwB,OAAOL,MAAUnB,EAAMW,KAAvC,IAA+CX,EAAMsB,WAKtC2C,CAAOjE,GACxB,OACE,mBACE6C,IAAK7C,EAAMe,GACXqB,UAAWpC,EAAMoC,UACjBC,IAAG,GAOH,mBAAKE,MAAO,CAAEQ,aAAc,OAAQE,WAAY,WAC7CjD,EAAMuB,UAET,uBACE,YAAC,OAAD,CAAMyC,GAAIhE,EAAMwB,OAAOL,MACrB,mBACEiB,UAAU,kBACVC,IAAG,EAWHE,MAAO,CACL2B,gBAAgB,OAAQC,YAAkBnE,GAA3B,SAKvB,mBAAKuC,MAAO,CAAEO,UAAW,SAAWiB","file":"component---src-pages-representatives-js-88a8e0c1cf876033b47e.js","sourcesContent":["import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport _ from \"lodash\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport {\n  loadCategoryStats,\n  joinPeopleVotelog,\n  peopleSlug,\n  formatOrdinalNumber,\n} from \"../utils\"\nimport StackedBarChart from \"../components/stackedBarChart\"\nimport { OfficialWebsite, InOfficeDate } from \"../components/profile\"\nimport PeopleCardMini from \"../components/peopleCardMini\"\nimport PartyGroupList from \"../components/partyGroupList\"\nimport VoteLogCard from \"../components/voteLogCard\"\n\nimport \"../styles/profile-book.css\"\n\nexport const query = graphql`\n  query {\n    house: partyYaml(party_type: { eq: \"สส\" }, is_active: { eq: true }) {\n      name\n      party_ordinal\n      description\n      established_date\n      dissolved_date\n      total_member\n      speaker\n      first_deputy_speaker\n      second_deputy_speaker\n      opposition_leader\n      website\n      facebook\n      twitter\n      email\n      phone\n      ratchakitcha\n      is_active\n    }\n    allPeopleYaml(filter: { is_mp: { eq: true }, is_active: { eq: true } }) {\n      totalCount\n      edges {\n        node {\n          id\n        }\n      }\n    }\n    mp_type: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      group(field: mp_type) {\n        value: totalCount\n        name: fieldValue\n      }\n    }\n    gender: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      group(field: gender) {\n        value: totalCount\n        name: fieldValue\n      }\n    }\n    education: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      group(field: education) {\n        value: totalCount\n        name: fieldValue\n      }\n    }\n    occupation_group: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      group(field: occupation_group) {\n        value: totalCount\n        name: fieldValue\n      }\n    }\n    age: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      edges {\n        node {\n          birthdate\n        }\n      }\n    }\n    asset: allPeopleYaml(\n      filter: { is_mp: { eq: true }, is_active: { eq: true } }\n    ) {\n      edges {\n        node {\n          asset\n        }\n      }\n    }\n    allVotelogYaml(\n      filter: { is_active: { eq: true } }\n      limit: 6\n      sort: { fields: vote_date, order: DESC }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          fields {\n            slug\n          }\n          title\n          description_th\n          passed\n          is_no_vote\n          no_vote_description\n          vote_date\n        }\n      }\n    }\n    allPeopleVoteYaml {\n      edges {\n        node {\n          id\n          votelog {\n            key\n            value\n          }\n        }\n      }\n    }\n  }\n`\n\nconst cssH1 = {\n  fontSize: \"4rem\",\n}\n\nconst cssSection = {\n  paddingTop: \"3rem\",\n  paddingBottom: \"8rem\",\n  h2: {\n    fontSize: \"4.8rem\",\n    textAlign: \"center\",\n  },\n}\n\nconst cssEngTitle = {\n  fontSize: \"2.4rem\",\n  textAlign: \"left\",\n  margin: \"1.5rem 0 1.2rem 0\",\n}\n\nconst cssPageP = {}\n\nconst cssBarChart = {\n  margin: \"1rem 0\",\n}\n\nconst RepresentativesPage = props => {\n  const { house, ...data } = props.data\n\n  const {\n    mp_type,\n    gender,\n    age,\n    education,\n    occupation_group,\n    asset,\n  } = loadCategoryStats(data)\n\n  const keyMembers = _.compact(\n    [\n      {\n        name: \"speaker\",\n        label: \"ประธานสภา\",\n      },\n      {\n        name: \"first_deputy_speaker\",\n        label: \"รองประธานสภา คนที่ 1\",\n      },\n      {\n        name: \"second_deputy_speaker\",\n        label: \"รองประธานสภา คนที่ 2\",\n      },\n      {\n        name: \"opposition_leader\",\n        label: \"ผู้นำฝ่ายค้าน\",\n      },\n    ].map((keyPos, id) => {\n      if (!house[keyPos.name]) return null\n      const nameParts = house[keyPos.name].split(\" \").slice(1)\n      const slug = peopleSlug(nameParts.join(\" \"))\n      const name = nameParts[0]\n      const lastname = nameParts.slice(1).join(\" \")\n      const position = keyPos.label\n      return { id, name, lastname, position, fields: { slug } }\n    })\n  )\n\n  const votelogs = joinPeopleVotelog(\n    data.allPeopleYaml,\n    data.allPeopleVoteYaml,\n    data.allVotelogYaml\n  ).filter(vote => vote.total_voter > 0)\n\n  return (\n    <Layout pageStyles={{ background: \"#eeeeee\" }}>\n      <SEO title=\"สมาชิกสภาผู้แทนราษฎรไทย\" />\n      <section className=\"section\">\n        <div className=\"book\">\n          <div className=\"page leftPage\">\n            <h1 css={{ ...cssH1, margin: \"1rem 0 0 0\" }}>\n              {house.name} ชุดที่ {house.party_ordinal}\n            </h1>\n            <h2 style={{ ...cssEngTitle }}>\n              <span\n                dangerouslySetInnerHTML={{\n                  __html: formatOrdinalNumber(house.party_ordinal),\n                }}\n              />{\" \"}\n              House of Representative\n            </h2>\n            <h2 style={{ ...cssEngTitle }}>About</h2>\n            <p css={{ ...cssPageP }}>{house.description}</p>\n            <h2 css={{ ...cssEngTitle }}>Official Link</h2>\n            <OfficialWebsite {...house}></OfficialWebsite>\n            <h2 css={{ ...cssEngTitle }}>In Office</h2>\n            <InOfficeDate {...house}></InOfficeDate>\n            <h2 style={{ ...cssEngTitle }}>Key Members</h2>\n            {keyMembers.map(x => {\n              return (\n                <div className=\"peopleCard\" key={x.id}>\n                  <PeopleCardMini key={x.id} {...x} />\n                </div>\n              )\n            })}\n          </div>\n          <div className=\"page\">\n            <h2\n              style={{\n                ...cssEngTitle,\n                marginTop: \"11.1rem\",\n                marginBottom: \"0rem\",\n              }}\n            >\n              Members\n            </h2>\n            <h2\n              style={{\n                ...cssEngTitle,\n                fontFamily: \"var(--ff-text)\",\n                fontWeight: \"normal\",\n              }}\n            >\n              สมาชิกสภาผู้แทนราษฏรจำนวน {data.allPeopleYaml.totalCount} คน\n            </h2>\n            <div css={{ width: \"100%\" }}>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={mp_type}></StackedBarChart>\n              </div>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={gender}></StackedBarChart>\n              </div>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={age}></StackedBarChart>\n              </div>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={education}></StackedBarChart>\n              </div>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={occupation_group}></StackedBarChart>\n              </div>\n              <div style={{ ...cssBarChart }}>\n                <StackedBarChart data={asset}></StackedBarChart>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {votelogs.length > 0 ? (\n        <section css={{ ...cssSection, background: \"var(--cl-white)\" }}>\n          <div className=\"container\">\n            <h2 css={{ ...cssH1 }}>การลงมติล่าสุดของสภาผู้แทนราษฎร</h2>\n            <div\n              css={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"flex-start\",\n                flexWrap: \"wrap\",\n                marginTop: \"6rem\",\n              }}\n            >\n              {votelogs.map(node => (\n                <VoteLogCard\n                  key={node.id}\n                  view={\"compact\"}\n                  css={{\n                    width: `calc((var(--container-width) - 4rem) / 2)`,\n                    margin: \"0 1rem 2rem 1rem\",\n                  }}\n                  title={node.title}\n                  description_th={node.description_th}\n                  passed={node.passed}\n                  approve={node.approve}\n                  disprove={node.disprove}\n                  abstained={node.abstained}\n                  absent={node.absent}\n                  total_voter={node.total_voter}\n                  vote_date={node.vote_date}\n                  slug={node.fields.slug}\n                />\n              ))}\n            </div>\n          </div>\n        </section>\n      ) : null}\n\n      <section css={{ ...cssSection, background: \"#eeeeee\" }}>\n        <div className=\"container\">\n          <div>\n            <h3\n              css={{\n                fontSize: \"4.5rem\",\n                textAlign: \"center\",\n                marginTop: \"4rem\",\n              }}\n            >\n              สำรวจตามพรรคการเมือง\n            </h3>\n            <PartyGroupList />\n          </div>\n        </div>\n      </section>\n    </Layout>\n  )\n}\n\nexport default RepresentativesPage\n","import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport { politicianPicture } from \"../utils\"\n\nconst MPInfo = props => (\n  <div\n    css={{\n      fontFamily: \"var(--ff-text)\",\n      fontWeight: \"bold\",\n      fontSize: \"1.6rem\",\n      a: { color: \"inherit\" },\n      verticalAlign: \"center\",\n      height: \"100%\",\n    }}\n  >\n    <Link to={props.fields.slug}>{`${props.name} ${props.lastname}`}</Link>\n  </div>\n)\n\nconst PeopleCardMini = props => {\n  let peopleInfo = MPInfo(props)\n  return (\n    <div\n      key={props.id}\n      className={props.className}\n      css={{\n        display: \"block\",\n        flex: \"1 1 360px\",\n        fontSize: \"1.8rem\",\n        marginBottom: \"2rem\",\n      }}\n    >\n      <div style={{ marginBottom: \"1rem\", fontWeight: \"medium\" }}>\n        {props.position}\n      </div>\n      <div>\n        <Link to={props.fields.slug}>\n          <div\n            className=\"profile-picture\"\n            css={{\n              borderRadius: 84,\n              width: 41,\n              height: 41,\n              float: \"left\",\n              marginBottom: 0,\n              marginRight: \"1rem\",\n              border: \"2px solid var(--cl-black)\",\n              background: \"var(--cl-gray-2) no-repeat\",\n              backgroundSize: \"cover\",\n            }}\n            style={{\n              backgroundImage: `url(${politicianPicture(props)})`,\n            }}\n          ></div>\n        </Link>\n      </div>\n      <div style={{ marginTop: \"2rem\" }}>{peopleInfo}</div>\n    </div>\n  )\n}\n\nexport default PeopleCardMini\n"],"sourceRoot":""}